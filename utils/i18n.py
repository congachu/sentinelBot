from utils.db import get_lang

# ê°„ë‹¨ í‚¤-ë¬¸ìì—´ ì‚¬ì „
TEXTS = {
    "ko": {
        "setlog_ok": "âœ… ë¡œê·¸ ì±„ë„ì´ {channel} ìœ¼ë¡œ ì„¤ì •ë˜ì—ˆìŠµë‹ˆë‹¤.",
        "setlog_clear": "ğŸ§¹ ë¡œê·¸ ì±„ë„ ì„¤ì •ì´ ì œê±°ë˜ì—ˆìŠµë‹ˆë‹¤.",
        "not_set": "âš ï¸ ë¡œê·¸ ì±„ë„ì´ ì•„ì§ ì„¤ì •ë˜ì§€ ì•Šì•˜ìŠµë‹ˆë‹¤. ë¨¼ì € `/setlog`ë¥¼ ì‹¤í–‰í•˜ì„¸ìš”.",
        "testlog_title": "ğŸ”’ SentinelBot ë¡œê·¸ í…ŒìŠ¤íŠ¸",
        "testlog_body": "ì´ ë©”ì‹œì§€ê°€ ë³´ì´ë©´ ë¡œê·¸ ì±„ë„ ì„¤ì • OK",
        "showconfig": "**ë¡œê·¸ ì±„ë„:** {channel}\n**ì–¸ì–´(Language):** {lang}",
        "setlang_ok": "âœ… ì–¸ì–´ê°€ `{lang}`(ìœ¼)ë¡œ ì„¤ì •ë˜ì—ˆìŠµë‹ˆë‹¤.",
        "unknown_error": "âŒ ì•Œ ìˆ˜ ì—†ëŠ” ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤.",
        "dm_join_notice": "ğŸ”’ ë³´ì•ˆ ì•ˆë‚´: ë³¸ ì„œë²„ëŠ” ì‹ ê·œ/ì˜ì‹¬ ê³„ì •ì„ ìë™ ëª¨ë‹ˆí„°ë§í•©ë‹ˆë‹¤. ì •ìƒ ìœ ì €ë¼ë©´ ë¬´ì‹œí•˜ì…”ë„ ë©ë‹ˆë‹¤. ë¬¸ì œê°€ ìˆìœ¼ë©´ ê´€ë¦¬ìì—ê²Œ ì•Œë ¤ì£¼ì„¸ìš”.",
        "log_join_title": "âš ï¸ ê²½ê³ : ì˜ì‹¬ ì…ì¥ ê°ì§€",
        "log_join_reason_new": "ìƒˆ ê³„ì •(â‰ˆ{hours}h)",
        "log_join_reason_raid": "ë‹¨ì‹œê°„ ë™ì‹œ ì…ì¥ {count}ëª…/{sec}s",
        "log_join_footer_config": "ë¡œê·¸ ì±„ë„ì€ /setlog ë¡œ ë³€ê²½í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.",
        "log_spam_title": "ğŸš¨ ìŠ¤íŒ¸/ë‚¨ìš© ê°ì§€",
        "log_spam_footer_config": "ìŠ¤íŒ¸ ì •ì±…ì€ ì°¨í›„ /spamset ìœ¼ë¡œ ì¡°ì • ì˜ˆì •",
        "dm_spam_notice": "ğŸ”’ ì•ˆë‚´: ì„œë²„ì˜ ìŠ¤íŒ¸/ë‚¨ìš© ë°©ì§€ ì •ì±…ì— ì˜í•´ ë©”ì‹œì§€ê°€ ì œì–´ë˜ì—ˆìŠµë‹ˆë‹¤. ë¬¸ì œê°€ ìˆìœ¼ë©´ ê´€ë¦¬ìì—ê²Œ ë¬¸ì˜í•˜ì„¸ìš”.",
        "log_spam_reason_rate": "ë‹¨ì‹œê°„ ê³¼ë„í•œ ë©”ì‹œì§€ ({count} / 10s)",
        "log_spam_reason_everyone": "@everyone/@here ë©˜ì…˜ ì‚¬ìš© ì°¨ë‹¨",
        "log_spam_reason_mentions": "ë©˜ì…˜ í­íƒ„ (mentions={mentions}, limit={limit})",
        "log_spam_reason_link": "ì˜ì‹¬ìŠ¤ëŸ¬ìš´ ë§í¬/ë„ë©”ì¸ ì°¨ë‹¨",
        "policies_title": "ğŸ”§ í˜„ì¬ ì •ì±…",
        "policies_body": (
            "**Risk**\n"
            "- ê³„ì • ìµœì†Œ ë‚˜ì´: {min_age}h\n- ë ˆì´ë“œ íŒì •: {raid_count}ëª…/{raid_win}s\n\n"
            "**Spam**\n"
            "- 10ì´ˆ ìµœëŒ€ ë©”ì‹œì§€: {max_msgs}\n- ë©”ì‹œì§€ë‹¹ ìµœëŒ€ ë©˜ì…˜: {max_mentions}\n"
            "- @everyone/@here ì°¨ë‹¨: {block_eh}\n- ë§í¬ í•„í„°: {link_filter}"
        ),
        "riskset_ok": "âœ… Risk ì •ì±…ì´ ì—…ë°ì´íŠ¸ë˜ì—ˆìŠµë‹ˆë‹¤.",
        "spamset_ok": "âœ… Spam ì •ì±…ì´ ì—…ë°ì´íŠ¸ë˜ì—ˆìŠµë‹ˆë‹¤.",
        "bool_on": "ì¼œì§",
        "bool_off": "êº¼ì§",
        "panic_on": "ğŸš¨ íŒ¨ë‹‰ ëª¨ë“œê°€ í™œì„±í™”ë˜ì—ˆìŠµë‹ˆë‹¤. ëª¨ë“  í…ìŠ¤íŠ¸ ì±„ë„ì„ ì½ê¸° ì „ìš©ìœ¼ë¡œ ì „í™˜í–ˆìŠµë‹ˆë‹¤.",
        "panic_off": "âœ… íŒ¨ë‹‰ ëª¨ë“œê°€ í•´ì œë˜ì–´ ì±„ë„ ê¶Œí•œì„ ì›ë³µí–ˆìŠµë‹ˆë‹¤.",
        "panic_already_on": "â„¹ï¸ ì´ë¯¸ íŒ¨ë‹‰ ëª¨ë“œì…ë‹ˆë‹¤.",
        "panic_already_off": "â„¹ï¸ íŒ¨ë‹‰ ëª¨ë“œê°€ ì•„ë‹™ë‹ˆë‹¤.",
        "panic_partial_warn": "âš ï¸ ì¼ë¶€ ì±„ë„ ê¶Œí•œ ì›ë³µì— ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤. ìˆ˜ë™ í™•ì¸ì´ í•„ìš”í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.",

        "lockdown_on": "ğŸ›¡ï¸ ë½ë‹¤ìš´ì´ í™œì„±í™”ë˜ì—ˆìŠµë‹ˆë‹¤. ì‹ ê·œ/ì˜ì‹¬ ê³„ì •ì˜ ë©”ì‹œì§€ê°€ ì œí•œë©ë‹ˆë‹¤.",
        "lockdown_off": "âœ… ë½ë‹¤ìš´ì´ í•´ì œë˜ì—ˆìŠµë‹ˆë‹¤.",
        "lockdown_already_on": "â„¹ï¸ ì´ë¯¸ ë½ë‹¤ìš´ ìƒíƒœì…ë‹ˆë‹¤.",
        "lockdown_already_off": "â„¹ï¸ ë½ë‹¤ìš´ ìƒíƒœê°€ ì•„ë‹™ë‹ˆë‹¤.",
        "lockdownset_ok": "âœ… ë½ë‹¤ìš´ ì„ê³„ê°’ì´ ì—…ë°ì´íŠ¸ë˜ì—ˆìŠµë‹ˆë‹¤.",
        "msg_blocked_lockdown": "ğŸ”’ ì•ˆë‚´: í˜„ì¬ ì„œë²„ ë½ë‹¤ìš´ ìƒíƒœë¡œ, ì‹ ê·œ/ì˜ì‹¬ ê³„ì •ì˜ ë©”ì‹œì§€ëŠ” ì œí•œë©ë‹ˆë‹¤.",
        "lockdown_title": "ğŸ”’ ë½ë‹¤ìš´",
        "lockdown_enabled": "ìƒíƒœ: {state}",
        "lockdown_min_age": "ê³„ì • ìµœì†Œ ë‚˜ì´: {hours}h",
        "lockdown_min_guild_age": "ì„œë²„ í•©ë¥˜ ì‹œê°„: {hours}h",
        "policy_update_delay": "âš ï¸ ì •ì±… ë³€ê²½ì´ ì ìš©ë˜ê¸°ê¹Œì§€ ìµœëŒ€ 10ì´ˆê°€ ê±¸ë¦´ ìˆ˜ ìˆìŠµë‹ˆë‹¤.",
        "help_title": "ğŸ“– ë„ì›€ë§",
        "help_intro": "ì›í•˜ëŠ” ê¸°ëŠ¥ì˜ ìŠ¬ë˜ì‹œ ëª…ë ¹ì„ ì„ íƒí•´ ì‚¬ìš©í•˜ì„¸ìš”. íŠ¹ì • ëª…ë ¹ì–´ ìƒì„¸ëŠ” `/help command:<ëª…ë ¹>`ìœ¼ë¡œ í™•ì¸í•  ìˆ˜ ìˆì–´ìš”.",
        "help_cat_basic": "ê¸°ë³¸ ì„¤ì •",
        "help_cat_policies": "ì •ì±… ê´€ë¦¬",
        "help_cat_admin": "ë¹„ìƒ ì œì–´",
        "help_cat_backup": "ë°±ì—… / ë³µêµ¬",
        "help_tips_title": "ì‚¬ìš© íŒ",
        "help_tips_body": "â€¢ ì •ì±… ë³€ê²½ ëª…ë ¹(`/riskset`, `/spamset`, `/lockdownset`)ì€ ì ìš©ì— ìµœëŒ€ 10ì´ˆê°€ ê±¸ë¦´ ìˆ˜ ìˆì–´ìš”.\nâ€¢ ë¬¸ì œê°€ ìƒê¸°ë©´ `/panic`ìœ¼ë¡œ ì±„íŒ…ì„ ì¼ì‹œ ì •ì§€í•˜ê³ , ì›ë³µì€ `/unpanic`ì„ ì‚¬ìš©í•˜ì„¸ìš”.\nâ€¢ ì„œë²„ êµ¬ì¡°ëŠ” `/backup_create`ë¡œ ë°±ì—…í•˜ê³  `/backup_restore`ë¡œ ë³µêµ¬í•  ìˆ˜ ìˆì–´ìš”.",
        "help_footer": "SentinelBot â€” ë³´ì•ˆì„ ê°„ë‹¨í•˜ê²Œ.",
        "help_unknown_command": "ì•Œ ìˆ˜ ì—†ëŠ” ëª…ë ¹ì–´ì˜ˆìš”: {name}",
        "help_command_title": "ëª…ë ¹ì–´ ì •ë³´: {name}",
        "help_command_desc": "ì„¤ëª…:",
        "help_command_usage": "ì¸ì ì„¤ëª…:",
        "help_optional": "ì„ íƒ",
        "help_required": "í•„ìˆ˜",
        "help_examples_header": "ì˜ˆì‹œ:",
        "backup_start": "ğŸ—„ï¸ ë°±ì—…ì„ ì‹œì‘í•©ë‹ˆë‹¤. ì„œë²„ ê·œëª¨ì— ë”°ë¼ ì‹œê°„ì´ ê±¸ë¦´ ìˆ˜ ìˆì–´ìš”.",
        "backup_done": "âœ… ë°±ì—… ì™„ë£Œ! (ID: {id})",
        "backup_list_title": "ğŸ—‚ ë°±ì—… ëª©ë¡",
        "backup_list_empty": "ëª©ë¡ì´ ë¹„ì–´ìˆì–´ìš”.",
        "backup_item": "â€¢ ID: {id} | {created} | {label}",
        "backup_not_found": "í•´ë‹¹ ë°±ì—…(ID: {id})ì„ ì°¾ì„ ìˆ˜ ì—†ì–´ìš”.",
        "restore_start": "â™»ï¸ ë³µêµ¬ë¥¼ ì‹œì‘í•©ë‹ˆë‹¤. ì‘ì—… ì¤‘ì—” ì±„ë„/ì—­í• ì´ ì ì‹œ í”ë“¤ë¦´ ìˆ˜ ìˆì–´ìš”.",
        "restore_done": "âœ… ë³µêµ¬ ì™„ë£Œ!",
        "restore_warn": "âš ï¸ ì¼ë¶€ í•­ëª© ë³µêµ¬ì— ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤. ë¡œê·¸ë¥¼ í™•ì¸í•´ ì£¼ì„¸ìš”.",
        "delete_ok": "ğŸ§¹ ë°±ì—…(ID: {id})ì„ ì‚­ì œí–ˆì–´ìš”.",
        "spamallow_hint": "ì‚¬ìš©ë²•: `/spamallow add <ì—­í• >`, `/spamallow remove <ì—­í• >`, `/spamallow list`",
        "spamallow_added": "{role} ì—­í• ì„ í™”ì´íŠ¸ë¦¬ìŠ¤íŠ¸ì— ì¶”ê°€í–ˆì–´ìš”.",
        "spamallow_removed": "{role} ì—­í• ì„ í™”ì´íŠ¸ë¦¬ìŠ¤íŠ¸ì—ì„œ ì œê±°í–ˆì–´ìš”.",
        "spamallow_list": "í™”ì´íŠ¸ë¦¬ìŠ¤íŠ¸: {roles}",
        "none": "ì—†ìŒ",   # í™”ì´íŠ¸ë¦¬ìŠ¤íŠ¸ ë¹„ì–´ìˆì„ ë•Œ
        "audit_title": "ğŸ”’ ë³´ì•ˆ ì ê²€ ë³´ê³ ì„œ",
        "audit_header": "ê¸°ë³¸ ì •ë³´",
        "audit_log_channel": "ë¡œê·¸ ì±„ë„",
        "audit_language": "ì–¸ì–´",
        "audit_section_risk": "Risk ì •ì±…",
        "audit_min_account_age": "ê³„ì • ìµœì†Œ ë‚˜ì´",
        "audit_raid_detection": "ë ˆì´ë“œ íƒì§€ (ì¸ì›/ì´ˆ)",
        "audit_section_spam": "Spam ì •ì±…",
        "audit_rate_limit": "ë©”ì‹œì§€ ì†ë„ ì œí•œ",
        "audit_mentions_limit": "ë©”ì‹œì§€ë‹¹ ìµœëŒ€ ë©˜ì…˜",
        "audit_block_everyone": "@everyone/@here ì°¨ë‹¨",
        "audit_link_filter": "ë§í¬ í•„í„°",
        "audit_whitelist": "í™”ì´íŠ¸ë¦¬ìŠ¤íŠ¸",
        "audit_section_lockdown": "Lockdown",
        "audit_lockdown_enabled": "í™œì„±í™”",
        "audit_lockdown_min_account": "ê³„ì • ìµœì†Œ ë‚˜ì´",
        "audit_lockdown_min_guild": "ì„œë²„ í•©ë¥˜ ìµœì†Œ ì‹œê°„",
        "audit_section_panic": "Panic",
        "audit_panic_status": "ìƒíƒœ",
        "audit_section_backups": "ë°±ì—…",
        "audit_backups_none": "ë°±ì—… ì—†ìŒ",
        "audit_backups_some": "{count}ê°œ ì¡´ì¬ (ìµœê·¼: {latest})",
        "audit_footer_hint": "ì •ì±… ë³€ê²½ í›„ ì ìš©ê¹Œì§€ ìµœëŒ€ 10ì´ˆê°€ ê±¸ë¦´ ìˆ˜ ìˆì–´ìš”.",
        "help_cat_audit": "ë³´ì•ˆ ì ê²€",
    },
    "en": {
        "setlog_ok": "âœ… Log channel set to {channel}.",
        "setlog_clear": "ğŸ§¹ Log channel setting has been cleared.",
        "not_set": "âš ï¸ Log channel is not set yet. Please run `/setlog` first.",
        "testlog_title": "ğŸ”’ SentinelBot Log Test",
        "testlog_body": "If you can see this, logging is configured correctly.",
        "showconfig": "**Log Channel:** {channel}\n**Language:** {lang}",
        "setlang_ok": "âœ… Language set to `{lang}`.",
        "unknown_error": "âŒ An unknown error occurred.",
        "dm_join_notice": "ğŸ”’ Security notice: This server automatically monitors new/suspicious accounts. If you are legit, you can ignore this message. Contact admins if you have issues.",
        "log_join_title": "âš ï¸ Warning: Suspicious Join Detected",
        "log_join_reason_new": "New account (â‰ˆ{hours}h)",
        "log_join_reason_raid": "Join surge {count} users/{sec}s",
        "log_join_footer_config": "You can change the log channel with /setlog.",
        "log_spam_title": "ğŸš¨ Spam/Abuse Detected",
        "log_spam_footer_config": "Policy adjustable later via /spamset",
        "dm_spam_notice": "ğŸ”’ Notice: Your message was moderated by the server's anti-spam policy. Contact admins if this was a mistake.",
        "log_spam_reason_rate": "Excessive message rate ({count} / 10s)",
        "log_spam_reason_everyone": "Blocked @everyone/@here mention",
        "log_spam_reason_mentions": "Mention bomb (mentions={mentions}, limit={limit})",
        "log_spam_reason_link": "Suspicious link/domain blocked",
        "policies_title": "ğŸ”§ Current Policies",
        "policies_body": (
            "**Risk**\n"
            "- Min account age: {min_age}h\n- Raid detection: {raid_count} users/{raid_win}s\n\n"
            "**Spam**\n"
            "- Max msgs per 10s: {max_msgs}\n- Max mentions per msg: {max_mentions}\n"
            "- Block @everyone/@here: {block_eh}\n- Link filter: {link_filter}"
        ),
        "riskset_ok": "âœ… Risk policy updated.",
        "spamset_ok": "âœ… Spam policy updated.",
        "bool_on": "ON",
        "bool_off": "OFF",
        "panic_on": "ğŸš¨ Panic mode enabled. All text channels set to read-only.",
        "panic_off": "âœ… Panic mode disabled. Permissions restored.",
        "panic_already_on": "â„¹ï¸ Panic mode is already ON.",
        "panic_already_off": "â„¹ï¸ Panic mode is not active.",
        "panic_partial_warn": "âš ï¸ Failed to restore some channels. Manual review may be required.",

        "lockdown_on": "ğŸ›¡ï¸ Lockdown enabled. Messages from new/suspicious accounts will be restricted.",
        "lockdown_off": "âœ… Lockdown disabled.",
        "lockdown_already_on": "â„¹ï¸ Lockdown is already ON.",
        "lockdown_already_off": "â„¹ï¸ Lockdown is not active.",
        "lockdownset_ok": "âœ… Lockdown thresholds updated.",
        "msg_blocked_lockdown": "ğŸ”’ Notice: During lockdown, messages from new/suspicious accounts are restricted.",
        "lockdown_title": "ğŸ”’ Lockdown",
        "lockdown_enabled": "Enabled: {state}",
        "lockdown_min_age": "Min account age: {hours}h",
        "lockdown_min_guild_age": "Min guild age: {hours}h",
        "policy_update_delay": "âš ï¸ Policy changes may take up to 10 seconds to apply.",
        "help_title": "ğŸ“– Help",
        "help_intro": "Use the slash commands below. For details of a specific command, run `/help command:<name>`.",
        "help_cat_basic": "Basic Setup",
        "help_cat_policies": "Policies",
        "help_cat_admin": "Emergency Controls",
        "help_cat_backup": "Backup / Restore",
        "help_tips_title": "Tips",
        "help_tips_body": "â€¢ Policy changes (`/riskset`, `/spamset`, `/lockdownset`) may take up to 10 seconds to apply.\nâ€¢ If something goes wrong, use `/panic` to freeze chats, then `/unpanic` to restore.\nâ€¢ Use `/backup_create` to snapshot and `/backup_restore` to recover your server structure.",
        "help_footer": "SentinelBot â€” Security made simple.",
        "help_unknown_command": "Unknown command: {name}",
        "help_command_title": "Command: {name}",
        "help_command_desc": "Description:",
        "help_command_usage": "Parameters:",
        "help_optional": "optional",
        "help_required": "required",
        "help_examples_header": "Examples:",
        "backup_start": "ğŸ—„ï¸ Starting backup. This may take a while depending on server size.",
        "backup_done": "âœ… Backup finished! (ID: {id})",
        "backup_list_title": "ğŸ—‚ Backups",
        "backup_list_empty": "No backups found.",
        "backup_item": "â€¢ ID: {id} | {created} | {label}",
        "backup_not_found": "Backup not found (ID: {id}).",
        "restore_start": "â™»ï¸ Starting restore. Channels/Roles may change during the process.",
        "restore_done": "âœ… Restore completed!",
        "restore_warn": "âš ï¸ Failed to restore some items. Please check logs.",
        "delete_ok": "ğŸ§¹ Deleted backup (ID: {id}).",
        "spamallow_hint": "Usage: `/spamallow add <role>`, `/spamallow remove <role>`, `/spamallow list`",
        "spamallow_added": "Added {role} to the whitelist.",
        "spamallow_removed": "Removed {role} from the whitelist.",
        "spamallow_list": "Whitelist: {roles}",
        "none": "none",
        "audit_title": "ğŸ”’ Security Audit Report",
        "audit_header": "Overview",
        "audit_log_channel": "Log channel",
        "audit_language": "Language",
        "audit_section_risk": "Risk Policy",
        "audit_min_account_age": "Min account age",
        "audit_raid_detection": "Raid detection (users/seconds)",
        "audit_section_spam": "Spam Policy",
        "audit_rate_limit": "Rate limit",
        "audit_mentions_limit": "Max mentions per message",
        "audit_block_everyone": "Block @everyone/@here",
        "audit_link_filter": "Link filter",
        "audit_whitelist": "Whitelist",
        "audit_section_lockdown": "Lockdown",
        "audit_lockdown_enabled": "Enabled",
        "audit_lockdown_min_account": "Min account age",
        "audit_lockdown_min_guild": "Min guild age",
        "audit_section_panic": "Panic",
        "audit_panic_status": "Status",
        "audit_section_backups": "Backups",
        "audit_backups_none": "No backups found",
        "audit_backups_some": "{count} found (latest: {latest})",
        "audit_footer_hint": "Policy updates may take up to 10 seconds to propagate.",
        "help_cat_audit": "Security Audit",
    },
}

def t(guild_id: int, key: str, **kwargs) -> str:
    lang = get_lang(guild_id)
    table = TEXTS.get(lang, TEXTS["ko"])
    msg = table.get(key, key)
    if kwargs:
        try:
            msg = msg.format(**kwargs)
        except Exception:
            pass
    return msg
